<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Changelog &#8212; soma-workflow version 3.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=514cf933" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    
    <script src="_static/documentation_options.js?v=3eb8911e"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="icon" href="_static/icon_small.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Installation and configuration" href="install_config.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install_config.html" title="Installation and configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">soma-workflow version 3.3 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Link to this heading">¶</a></h1>
<section id="version-3-2-2023-01-16">
<h2>Version 3.2 (2023/01/16)<a class="headerlink" href="#version-3-2-2023-01-16" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Python2 support has been dropped.</p></li>
<li><p>Optimization for scalability: performance in the engine and database has been much improved, in order to manage very large workflows, especially for workflows of independent jobs (large iterations). Where soma-workflow &lt;= 3.1 used to reach a limit around 5-10000 jobs (with timeouts causing aborts and hangs in the engine), in 3.2 it has now been tested using up to 500000 jobs in local and MPI modes. The MPI mode is by far the most efficient for such large workflows (processing 500000 very small jobs in about 25 minutes on a 8-core laptop). Both Workflow submission, engine management, and scheduling have been much improved, and processing time has dropped by several orders of magnitude. For very large workflows around the limit, however, monitoring (using either soma_workflow_gui or the client API) may involve an overhead which may cause timeouts in the database, which may in turn hang or crash the engine.</p></li>
<li><p>Docs complements and improvements.</p></li>
<li><p>Support for PyQt6 on the way (not entirely tested yet).</p></li>
<li><p>Added an “isolated light mode” mode where all soma-workflow (config, database, temp files and transfers) are in a separate, potentially temporary directory, and will not interfere with other instances of soma-workflow and databases.</p></li>
<li><p>Several bug fixes.</p></li>
</ul>
</section>
<section id="version-3-1-2019-11-15">
<h2>Version 3.1 (2019/11/15)<a class="headerlink" href="#version-3-1-2019-11-15" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>the communication protocol in client / server mode (now based on ZMQ since 3.0) has been modified to handle multi-threaded, asynchronous requests, and avoid deadlocks. Disconnections are detected at several places and both client and server stopped when this occurs.</p></li>
<li><p>workflows can get an “env” variable, like jobs do, and will apply their environment to all jobs</p></li>
<li><p>workflows can get an “env_builder_code” variable, which contains python source code which will be executed to build additional environment variables on the engine side when the workflow is submitted. This allows to handle client/server configurations, and partially some dynamic workflow tuning.</p></li>
<li><p>jobs env has been fixed in the local scheduler: it used to completely replace the env variables, now it just adds the new ones to the standard user variables.</p></li>
<li><p>Dynamic parameters in workflows: jobs can now have “named parameters” and outputs produced by a job (number, string, filename) are passed to downstream jobs. While passing values from a job output to another job input, custom link functions can be called to transform values, enabling applications such as map/reduce, cross-validation or leave-one-out in a semi-dynamic way.</p></li>
<li><p>some bug fixes especially in the PBSpro scheduler using python3</p></li>
</ul>
</section>
<section id="version-3-0-2019-02-04">
<h2>Version 3.0 (2019/02/04)<a class="headerlink" href="#version-3-0-2019-02-04" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Pyro is gone, Soma-Workflow is now using <a class="reference external" href="http://zeromq.org/">ZMQ</a> and <a class="reference external" href="https://pyzmq.readthedocs.io/en/latest/">PyZmq</a>.</p>
<p>As a consequence, all the client/server communication layer has been made completely incompatible with soma-workflow 2.10 and earlier. Client and server should always be the same version anyway. The client/server API has not changed fundamentally however.</p>
</li>
<li><p>Porting to Python3: Pyro3 having been dropped, all the requirements for porting to Python3 have now been met, and Soma-Workflow can entirely wotk using Python3. However it is not possible to run different versions of Python on the client and the server: read <a class="reference internal" href="changes_swf3.html"><span class="doc">Important changes in Soma-Workflow 3</span></a> for details.</p></li>
<li><p>New PBSPro scheduler type, to be used when DRMAA is not available, or doesn’t work (like on our new cluster): use <code class="docutils literal notranslate"><span class="pre">scheduler_type</span> <span class="pre">=</span> <span class="pre">pbspro</span></code> in the server config file. It might also work on PBS/Torque, we have not tried yet.</p></li>
<li><p>It is now possible to restart a workflow which is still running: running / pending jobs will go on, and only failed jobs will be restarted.</p></li>
<li><p>A few improvements, such as the 2 new plots modes in the GUI (soma_workflow_gui) displaying the use of CPUs in addition to jobs (useful for parallel jobs)</p></li>
</ul>
</section>
<section id="version-2-11-2019-06-05">
<h2>Version 2.11 (2019/06/05)<a class="headerlink" href="#version-2-11-2019-06-05" title="Link to this heading">¶</a></h2>
<p>bug fixes</p>
</section>
<section id="version-2-10-2019-02-04">
<h2>Version 2.10 (2019/02/04)<a class="headerlink" href="#version-2-10-2019-02-04" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>In Soma-Workflow 2.10, the <strong>“server management” options</strong> have finally been fixed (they have basically never been working earlier). It is now possible to completely install soma-workflow on a remote server and configure it (in a basic way) from the GUI of a client. Only Python is required to be installed on server side, and DRMAA if the server is a cluster using a DRMS.</p></li>
<li><p>Soma-Workflow allows a new server config option, <a class="reference internal" href="install_config.html#container-command"><span class="std std-ref">CONTAINER_COMMAND</span></a>, which allows to <strong>run jobs through a container</strong> (typically <a class="reference external" href="https://www.docker.com/">Docker</a> or <a class="reference external" href="https://www.sylabs.io/singularity/">Singularity</a>)</p></li>
</ul>
</section>
<section id="version-2-9-sept-2017">
<h2>Version 2.9 (sept. 2017)<a class="headerlink" href="#version-2-9-sept-2017" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Performance optimization</p>
<p>Some optimization has been done, especially in database queries which have been largely reduced, in jobs dependencies scanning, and in workflow submission (a lot of time was used to create empty stdout/stderr files which were not needed right now). As a consequence the load of jobs management is somewhat ligher, and submitting large workflows is way faster. This also prevents spurious timeouts when the server was too loaded.</p>
</li>
<li><p>command added: <code class="docutils literal notranslate"><span class="pre">soma_kill_servers</span></code>, kills a computing resource servers and optionally clears its database, from the client. Convenient if something went wrong on server side, or if you have upgraded soma-workflow version.</p></li>
<li><p>Porting to Python 3, except the client/server communication which relies on Pyro3, and Pyro3 has not been ported to python 3.</p></li>
<li><p>Compatibility with PyQt4, PyQt5, PySide.</p></li>
<li><p>Important bugs fixed, especially some which could cause deadlocks in the engine.</p></li>
</ul>
</section>
<section id="version-2-8-feb-2016">
<h2>Version 2.8 (Feb. 2016)<a class="headerlink" href="#version-2-8-feb-2016" title="Link to this heading">¶</a></h2>
<ul>
<li><p>More precise job status:</p>
<p>Differentiates between jobs which have not run yet, or those which have not run because the workflow was interrupted.</p>
</li>
<li><p>Major performance issue fixed when submitting a workflow.</p></li>
<li><p>Bug fix: stronger protection of the database from concurrent access:</p>
<p>The database is responsible for assigning standard output/error files for jobs. It had a bug which may result in the same file name being assigned to different jobs from distinct connections to the database.</p>
</li>
<li><p>Fix in jobs killing when killed jobs have children processes.</p></li>
<li><p>new config option: MAX_JOB_RUNNING, which can limit the number of running jobs through a given queue, when the DRMS queue has no limitation by itself.</p></li>
<li><p>Fixed a mode (which have probably never completely worked): local scheduler on a remote server (without a real DRMS). This mode is now supported and the number of used CPUs can be setup via config and in the GUI, like in “real” local mode.</p></li>
<li><p>Partial porting to python 3.</p>
<p>This port is using the “six” python module, which is thus a new dependency of Soma-Workflow.</p>
<p>Currently the local mode should be working. Client/server mode is not (the main remaining issue being the use of Pyro 3 for communications which does not exist for python 3).</p>
<p>In the process, python 2.5 support has been dropped. 2.6 and 2.7 are still supported.</p>
</li>
</ul>
</section>
<section id="version-2-7-may-2015">
<h2>Version 2.7 (May 2015)<a class="headerlink" href="#version-2-7-may-2015" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Temporary files:</p>
<p>Temporary files are a special file object (like FileTransfer or SharedResourcePath) which are handled on server side: temporary file names are created during the workflow execution by the server, and are never seen on the client.</p>
</li>
<li><p>Barrier jobs:</p>
<p>Barrier jobs are “fake” jobs, which do not actually run on computing resources, but may be used as hubs for dependencies to reduce the number of dependencies between many hihgly connected jobs. See the documentation of the BarrierJob class.</p>
</li>
<li><p>Groups dependencies:</p>
<p>Workflow dependencies may use Group elements: a job, or a group, may depend on another job or group. As the engine only manipulates Jobs, groups dependencies are converted internally (using additional barrier jobs) when creating the workflow.</p>
</li>
<li><p>Automatic start of the Pyro name server when connecting from a client</p></li>
<li><p>Fix: DRMAA used to leave files in $HOME/.drmaa/, more precisely 2 files for each job, which were never deleted. Soma-Workflow now tries to delete them when a job is finished.</p></li>
</ul>
</section>
<section id="version-2-6-november-2013">
<h2>Version 2.6 (November 2013)<a class="headerlink" href="#version-2-6-november-2013" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>No more dependency on SIP</strong>:</p>
<p>SIP wrapping code has been removed. The ctypes module is used for driving the DRMAA library in remote distributed execution.</p>
</li>
</ul>
</section>
<section id="version-2-5-may-2013">
<h2>Version 2.5 (May 2013)<a class="headerlink" href="#version-2-5-may-2013" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Replacement of SIP-based wrapping for the C DRMAA library by ctypes wrapping. It removes the need for SIP and a C compiler to benefit from remote distributed execution support using DRMAA.</p></li>
<li><p>Automatically start the database server on remote execution when it is not running anymore.</p></li>
<li><p><strong>FIX</strong>: segfaults could occur in the GUI, during the periodic polling code when dealing with large workflows.</p></li>
</ul>
</section>
<section id="version-2-4-march-2013">
<h2>Version 2.4 (March 2013)<a class="headerlink" href="#version-2-4-march-2013" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>MPI scheduler Beta</strong>:</p>
<ul>
<li><p>run your workflows using an implementation of MPI (Message Passing Interface) (<a class="reference external" href="http://www.open-mpi.org/">open-mpi</a>, <a class="reference external" href="http://www.mpich.org/">mpich</a>…)</p></li>
<li><p>monitor the execution as usual in the GUI or using the Python API.</p></li>
<li><p>with <a class="reference external" href="https://bitbucket.org/mpi4py/">MPI4py</a> you can run your workflow on any cluster with pure python code.</p></li>
</ul>
</li>
<li><p>Submit, stop, restart and delete workflows using <strong>command lines</strong>.</p></li>
<li><p><strong>Deprecation</strong> of the methods which control jobs apart from workflows:</p>
<ul>
<li><p>submit_job</p></li>
<li><p>delete_job</p></li>
<li><p>kill_job</p></li>
<li><p>restart_job</p></li>
</ul>
</li>
<li><p><strong>Fix</strong>: save a workflow from the GUI</p></li>
</ul>
</section>
<section id="version-2-3-august-2012">
<h2>Version 2.3 (August 2012)<a class="headerlink" href="#version-2-3-august-2012" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The workflows are saved in the <strong>JSON format</strong> for longer term storage.</p></li>
<li><p>Access the full range of features of your cluster using <strong>native specification</strong> (see <a class="reference internal" href="errors_troubleshooting.html"><span class="doc">Soma-workflow tips</span></a>)</p></li>
<li><p>Optimization: <strong>acceleration</strong> of the workflow engine in case of <strong>large workflows</strong> with execution dependencies (more than 2000 jobs).</p></li>
<li><p>Helpers:</p>
<ul>
<li><p>Easy <strong>monitoring</strong> of workflow execution using the <strong>Python API</strong>: list_failed_jobs method.</p></li>
<li><p>Delete all the workflows at once.</p></li>
</ul>
</li>
</ul>
</section>
<section id="version-2-2-may-2012">
<h2>Version 2.2 (May 2012)<a class="headerlink" href="#version-2-2-may-2012" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Gui: <strong>Compatibility with PySide</strong> <a class="reference external" href="http://www.pyside.org">http://www.pyside.org</a> in addition to <a class="reference external" href="http://www.riverbankcomputing.co.uk/software/pyqt/intro">PyQt</a>.</p></li>
<li><p>More informative error messages.</p></li>
</ul>
</section>
<section id="version-2-1-march-2012">
<h2>Version 2.1 (March 2012)<a class="headerlink" href="#version-2-1-march-2012" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Intermediate results can be available more quickly defining job priorities</strong> within workflows (see <a class="reference internal" href="errors_troubleshooting.html"><span class="doc">Soma-workflow tips</span></a>)</p></li>
<li><p>Improvement of the graphical interface (see <a class="reference internal" href="gui.html"><span class="doc">GUI documentation</span></a>):</p>
<ul>
<li><p>Overview of the <strong>status of all workflows at a glance</strong>.</p></li>
<li><p><strong>Easy pinpoint of jobs</strong> within workflows: job filter by status or name.</p></li>
<li><p>Multiple core machine: <strong>the number of employed cpu can be changed at any time</strong> directly from the GUI.</p></li>
<li><p>Display of the queue used for each workflow.</p></li>
</ul>
</li>
<li><p><strong>Optimizations.</strong></p></li>
<li><p><strong>Better error management and stability.</strong></p></li>
<li><p>Possible configuration of login for each computing resource.</p></li>
<li><p>Possibility to change the submission queue when restarting a workflow.</p></li>
</ul>
</section>
<section id="version-2-0-november-2011">
<h2>Version 2.0 (November 2011)<a class="headerlink" href="#version-2-0-november-2011" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Soma-workflow can be used directly on a multiple core machine.</strong></p></li>
<li><p><strong>Soma-workflow is independent of DRMAA</strong> and interaction with other interfaces can be easily implemented.</p></li>
<li><p>File transfers: New API with several implementations (scp, rsync or a portable implementation).</p></li>
<li><p>New control feature: <strong>possibility to stop the workflows.</strong></p></li>
<li><p>+ optimizations</p></li>
</ul>
</section>
<section id="first-release-version-1-0-july-2011">
<h2>First release Version 1.0 (July 2011)<a class="headerlink" href="#first-release-version-1-0-july-2011" title="Link to this heading">¶</a></h2>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_white_small.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#version-3-2-2023-01-16">Version 3.2 (2023/01/16)</a></li>
<li><a class="reference internal" href="#version-3-1-2019-11-15">Version 3.1 (2019/11/15)</a></li>
<li><a class="reference internal" href="#version-3-0-2019-02-04">Version 3.0 (2019/02/04)</a></li>
<li><a class="reference internal" href="#version-2-11-2019-06-05">Version 2.11 (2019/06/05)</a></li>
<li><a class="reference internal" href="#version-2-10-2019-02-04">Version 2.10 (2019/02/04)</a></li>
<li><a class="reference internal" href="#version-2-9-sept-2017">Version 2.9 (sept. 2017)</a></li>
<li><a class="reference internal" href="#version-2-8-feb-2016">Version 2.8 (Feb. 2016)</a></li>
<li><a class="reference internal" href="#version-2-7-may-2015">Version 2.7 (May 2015)</a></li>
<li><a class="reference internal" href="#version-2-6-november-2013">Version 2.6 (November 2013)</a></li>
<li><a class="reference internal" href="#version-2-5-may-2013">Version 2.5 (May 2013)</a></li>
<li><a class="reference internal" href="#version-2-4-march-2013">Version 2.4 (March 2013)</a></li>
<li><a class="reference internal" href="#version-2-3-august-2012">Version 2.3 (August 2012)</a></li>
<li><a class="reference internal" href="#version-2-2-may-2012">Version 2.2 (May 2012)</a></li>
<li><a class="reference internal" href="#version-2-1-march-2012">Version 2.1 (March 2012)</a></li>
<li><a class="reference internal" href="#version-2-0-november-2011">Version 2.0 (November 2011)</a></li>
<li><a class="reference internal" href="#first-release-version-1-0-july-2011">First release Version 1.0 (July 2011)</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="install_config.html"
                          title="previous chapter">Installation and configuration</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/changelog.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="install_config.html" title="Installation and configuration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">soma-workflow version 3.3 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2021 CEA, Neurospin, France, CATI, France.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>